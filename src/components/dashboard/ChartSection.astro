---
import type { Topic } from '../../types/dashboard';
import '../../styles/components.css';

export interface Props {
  title: string;
  description: string;
  topics: Topic[];
  colors: string[];
  chartType: 'area' | 'pack';
  gridSpan?: string;
}

const { 
  title, 
  description, 
  topics, 
  colors, 
  chartType, 
  gridSpan = "lg:col-span-3"
} = Astro.props;
---

<div class={`${gridSpan}`}>
  <div class="card card-padding h-full">
    <div class="mb-6">
      <h2 class="heading-tertiary" style="font-family: 'Times New Roman', 'Times', serif;">
        {title}
      </h2>
      <p class="text-meta" style="font-size: 0.875rem;">
        {description}
      </p>
    </div>
    
    {chartType === 'area' ? (
      <!-- Temporal Analysis Layout -->
      <div class="flex flex-col lg:flex-row lg:gap-4">
        <!-- Chart Container -->
        <div class="w-full lg:w-4/5">
          <div class="chart-container">
            <slot />
          </div>
        </div>
        
        <!-- Desktop Legend -->
        <div class="hidden lg:block lg:w-1/5">
          <div class="chart-container flex flex-col justify-start pt-4">
            <div class="legend">
              <div class="legend-title">Topics</div>
              {topics.map((topic, index) => (
                <div class="legend-item">
                  <div class="legend-color" style={`background-color: ${colors[index]};`}></div>
                  <span class="legend-label">{topic.name}</span>
                </div>
              ))}
            </div>
          </div>
        </div>
      </div>
      
      <!-- Mobile Legend -->
      <div class="block lg:hidden mt-4">
        <div class="legend">
          <div class="legend-title">Topics</div>
          <div class="legend-scroll">
            <div class="legend-grid">
              {topics.map((topic, index) => (
                <div class="legend-item">
                  <div class="legend-color" style={`background-color: ${colors[index]};`}></div>
                  <span class="legend-label">{topic.name}</span>
                </div>
              ))}
            </div>
          </div>
        </div>
      </div>
    ) : (
      <!-- Pack Chart Layout -->
      <div class="chart-container">
        <slot />
      </div>
    )}
  </div>
</div>